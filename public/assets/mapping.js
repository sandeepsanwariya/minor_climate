var data={ 
    "London":[51.5074, 0.1278],
    "Dagenham,-London": [51.5389, 0.1474],
    "Stratford,-London":[51.5472, 0.0081],
    "Barking,-London": [51.5366, 0.0758],
    "Portsmouth,-UK" :[50.8198, 1.0880],
    "Southampton,-UK": [50.9097, 1.4044],
    "Louisiana": [30.9843, 91.9623],
    "New-Orleans": [29.9511, 90.0715],
    "Houston" :[29.7604, 95.3698],
    "Atlantic-City,-New-Jersey" :[39.3643, 74.4229],
    "New-York-City" :[40.7128, 74.0060],
    "Charleston-South-Carolina":[32.7765, 79.9311],
    "Boston-Massachuesets": [42.3601, 71.0589],
    "Virgin-Beach,-Virginia" :[36.8529, 75.9780],
    "Norfolk,-VA" :[36.8508, 76.2859],
    "Redwood-City,-CA " :[37.4848, 122.2281],
    "Hampton,-VA": [37.0299, 76.3452],
    "Urban-Honolulu,-HI": [21.3069, 157.8583],
    "Cambridge,-MA" : [42.3736, 71.1097],
    "Mount-Pleasant,-SC" :[32.8323, 79.8284],
    "Quebec,-Canada ":[46.8139, 71.2080],
    "Richmond,-B.C.,-Canada" :[49.1666, 123.1336] ,
    "Delta,-B.C.,-Canada": [49.0952, 123.0265],
    "The-Tantramar-Marsh-in-New-Brunswick,-Canadam" :[45.8943 -64.3065],
    "Weston Supermare, England" :[51.3474, 2.9773],
    "Newport,-Wales" :[51.5842, 2.9977],
    "Hull,-England" :[53.7676, 0.3274],
    "Skegness,-England": [53.1464, 0.3379],
    "American-Samoa":[-14.305711987770538,-170.7007316174498],
"United-States-Minor-Outlying-Islands":[15.421124215614473,-61.98493557207482],
"Cook-Islands":[-17.435370030130244,-161.46513330483654],
"French-Polynesia":[-13.526316739606632,-145.255376012188],
"Niue":[-19.05230921680393,-169.86878106699083],
"Pitcairn":[-24.653806919025705,-129.0334897679429],
"Samoa":[-13.760751252387802,-172.14588210018303],
"Tokelau":[-9.195174767256544,-171.85265950722743],
"Tonga":[-20.059250935052876,-174.6821765193416],
"Wallis-and-Futuna":[-13.792571994599982,-177.16299992783053],
"El-Salvador":[13.758041517055418,-88.85911489238985],
"Guatemala":[15.820878515352684,-90.31219349119615],
"Mexico":[23.64394843426795,-103.12043937176708],
"Canada":[62.3658719808934,-93.56663466105805],
"Argentina":[-37.60564452525247,-64.44315167435285],
"Falkland-Islands":[-51.75209043005578,-59.51781251542691],
"Chile":[-34.32823756130027,-81.25545034464567],
"Ecuador":[-1.2980654335322974,-82.33897595908059],
"Peru":[-8.522717984240291,-74.11416196781884],
"Bolivia":[-16.7312488393574,-64.45209597511206],
"Brazil":[-11.524630416426652,-54.35520660825642],
"Paraguay":[-23.42190559259428,-58.38906357428651],
"Uruguay":[-32.78195043831093,-56.01919523458085],
"South-Georgia-and-South-Sandwich-Islands":[-55.79467861523634,-33.084862315910726],
"Antarctica":[-76.48551363834154,-173.95712216184216],
"Fiji":[-17.62052426700569,178.6951729153761],
"Saint-Helena":[-15.962963318340398,-5.717391620813109],
"Anguilla":[18.222874004219086,-63.06008343771806],
"Antigua-and-Barbuda":[17.32188358622719,-61.79187002978877],
"Aruba":[12.515625722992898,-69.97564014284046],
"Bahamas":[23.971980844721568,-75.94757049263755],
"Barbados":[13.183219369337529,-59.557383949150285],
"Belize":[17.29459368926392,-88.5802147985989],
"Bermuda":[32.315067430740726,-64.7458500599169],
"Bonaire":[12.180844982440338,-68.29350445958761],
"British-Virgin-Islands":[18.446627982858317,-64.51741866359077],
"Cayman-Islands":[19.311231805620288,-81.25203208977878],
"Colombia":[5.294234610435874,-73.84582517707032],
"Costa-Rica":[9.863467407406214,-84.14673625701816],
"Cuba":[21.50036820995566,-79.6459652585029],
"Curacao":[12.199996647939832,-68.96939768599042],
"Dominica":[15.429269860940511,-61.360471946942994],
"Dominican-Republic":[18.75542599628316,-70.40475973716906],
"French-Guiana":[3.857429742497078,-53.32232307156624],
"Grenada":[12.112926656338908,-61.67937937204098],
"Guadeloupe":[16.16880154346758,-61.47999931489154],
"Guyana":[4.68211981385056,-58.91352612754667],
"Haiti":[18.911768634685547,-72.88622713826513],
"Honduras":[14.814433611247113,-86.48189284585226],
"Jamaica":[18.12207889341651,-77.30358894542778],
"Martinique":[14.642697353597644,-61.01432380875083],
"Montserrat":[16.735363391460357,-62.18693281256255],
"Nicaragua":[12.893566631930554,-85.016088327669],
"Panama":[8.422311846143703,-80.17590175543056],
"Puerto-Rico":[18.210417890187674,-66.41658843324701],
"Saba":[17.632512616389718,-63.23739481909494],
"Saint-Barthelemy":[17.90561691241738,-62.83051610005156],
"Saint-Eustatius":[17.4919042294197,-62.97823058944503],
"Saint-Kitts-and-Nevis":[17.314736299587768,-62.74560385895787],
"Saint-Lucia":[13.895749185129906,-60.9689510935251],
"Saint-Martin":[18.078012113224464,-63.06678525361946],
"Saint-Pierre-and-Miquelon":[46.916907230538186,-56.293775131873765],
"Saint-Vincent-and-the-Grenadines":[13.254808122970651,-61.19376635439304],
"Sint-Maarten":[18.03942608463078,-63.06883135915303],
"Suriname":[4.098723595920171,-55.855514311561286],
"Trinidad-and-Tobago":[10.580055762974936,-61.219702159991385],
"Turks-and-Caicos-Islands":[21.714564146976688,-71.58749619781581],
"US-Virgin-Islands":[17.997411702882236,-64.82237229469811],
"Venezuela":[7.162820597836788,-66.36112352700972],
"Burkina-Faso":[12.108709036312735,-1.6932816211842323],
"Cabo-Verde":[16.068302102903527,-23.967443137094858],
"Côte-d'Ivoire":[7.536779279421307,-5.571710194917734],
"Gambia":[13.428617959189328,-15.383380385869662],
"Ghana":[7.94530467243628,-1.219233362526581],
"Gibraltar":[36.14022671336082,-5.345549484594358],
"Guinea":[10.255986541378112,-10.986948848040218],
"Guinea-Bissau":[11.890510055620116,-15.15305969813266],
"Liberia":[6.52012979398834,-9.258988935497618],
"Mali":[17.168146208584837,-4.346399841781153],
"Mauritania":[20.466731212820022,-10.495079045035716],
"Morocco":[28.687598134979325,-8.817212587250811],
"Portugal":[38.02028834374672,-16.832656931059564],
"Senegal":[14.228861491763402,-14.610875368352303],
"Sierra-Leone":[8.543593293153963,-11.808781566553495],
"Greenland":[74.14793601519504,-42.18679364299874],
"Guernsey":[49.45870771378872,-2.576392582891568],
"Ireland":[53.30614676207018,-8.258826761874563],
"Isle-of-Man":[54.22855301008011,-4.532995055468449],
"Jersey":[49.21539692572431,-2.129160116265357],
"United-Kingdom":[54.90083227861851,-3.156995563222747],
"Iceland":[65.12360920205514,-19.05682967106099],
"Faroe-Islands":[61.97101453244277,-6.852020428963805],
"Svalbard":[76.48564398291828,13.36016331611152],
"Bouvet-Island":[-54.42316679395248,3.411969465057627],
"New-Zealand":[-43.65747884581795,56.86665418117432],
"Angola":[-11.89758947644664,17.478008046252885],
"Botswana":[-22.236609002062902,23.85779956995608],
"Burundi":[-3.261251993278643,29.88518227845293],
"Comoros":[-11.969445595220847,43.81817519272116],
"Congo":[-0.7294391595233845,14.879732849491392],
"Congo-DRC":[-3.338629596207896,23.419827574282188],
"Gabon":[-0.628448459921234,11.839410898545754],
"Kenya":[0.6899182318376179,37.95309411262371],
"Lesotho":[-29.60168116924817,28.24475317864227],
"Malawi":[-13.128986464184024,34.23441182298881],
"Juan-De-Nova-Island":[-17.06449193630804,42.74374761089645],
"Mozambique":[-17.525230309488748,35.208577031290176],
"Namibia":[-21.90858163281473,18.16451345845268],
"Rwanda":[-2.014687460047154,29.91943968176408],
"Sao-Tome-and-Principe":[0.7728330713558265,6.911986724638052],
"South-Africa":[-32.72976617311268,27.578231339253037],
"Eswatini":[-26.562540935608705,31.510685746082007],
"Tanzania":[-6.35360420423765,34.93574264768485],
"Zambia":[-13.162832953186246,27.75521363430896],
"Zimbabwe":[-18.92700121981475,29.717829640720844],
"British-Indian-Ocean-Territory":[-7.323548444385743,72.43501618476016],
"French-Southern-Territories":[-48.26579567146711,63.297413102060936],
"Heard-Island-and-McDonald-Islands":[-53.084170035513736,73.49298560844045],
"Madagascar":[-19.04163612493041,46.68493466832544],
"Mauritius":[-20.06050170376338,59.68861271868012],
"Mayotte":[-12.821449995165704,45.14867383883924],
"Glorioso-Islands":[-11.566224871643415,47.29094808154338],
"Réunion":[-21.119825460665105,55.54393506194689],
"Seychelles":[-6.847341132139227,51.28904175365966],
"Algeria":[28.350969744889056,2.655846471976913],
"Benin":[9.503013199615893,2.305714528830206],
"Cameroon":[6.294168487480992,12.948474142398265],
"Central-African-Republic":[6.331390033944319,20.520743419397256],
"Chad":[15.283493546654505,18.427113900363025],
"Equatorial-Guinea":[2.16345301148848,9.917747921680592],
"Kiribati":[1.6860774162119534,-42.29462747902002],
"Libya":[27.202915771690797,17.91133392454237],
"Malta":[35.890522650899314,14.441922442508494],
"Niger":[17.08105392407292,8.86863247002646],
"Nigeria":[9.609707376481593,8.147632718717043],
"Togo":[8.660743037717811,0.8990857571109684],
"Tunisia":[34.08636179565723,9.65587551697984],
"Cyprus":[35.11700416345239,33.375346009199205],
"Djibouti":[11.750235727618804,42.61349689878951],
"Egypt":[26.60517034450628,30.240135435012338],
"Eritrea":[15.005533147667684,39.2672401449901],
"Ethiopia":[8.729389557048396,39.91490288654428],
"Greece":[38.41864937016185,24.255596388632085],
"Iraq":[33.105075667527906,43.83252918105688],
"Israel":[31.513542220043195,35.027923472437024],
"Jordan":[31.38706488444916,36.95728884547246],
"Lebanon":[33.91160170722086,35.89651946324749],
"Palestinian-Territory":[31.82082842115889,35.03083098563104],
"South-Sudan":[7.657782041763295,30.3851856901788],
"Sudan":[15.67060230984256,29.951458283594064],
"Syria":[35.09751106058316,38.5117323139514],
"Turkey":[39.09097225284415,35.09557205928997],
"Uganda":[1.2821729218416205,32.34371768463123],
"Andorra":[42.54859834854764,1.5802243611232871],
"United-States":[42.46427186904937,-127.76385744090392],
"France":[46.20410930340389,2.936178131958199],
"Liechtenstein":[47.14627562133036,9.547674672376376],
"Monaco":[43.74798224995656,7.412820873271196],
"Switzerland":[46.73678128684938,8.286928794895285],
"Belgium":[50.6182138854095,4.675010154696485],
"Germany":[51.14928158531881,10.46159124903506],
"Luxembourg":[49.77523454542369,6.103230338458876],
"Netherlands":[52.13751518539507,5.4745768526276],
"Albania":[41.14165894891656,20.061082767269493],
"Austria":[47.631858269895794,13.797778364631036],
"Bosnia-and-Herzegovina":[44.14415356126429,17.83467240787538],
"Croatia":[44.64931472195953,16.782818411227737],
"Czech-Republic":[49.74917370930982,15.383273292023532],
"Denmark":[55.91555312652204,11.00211247600492],
"Hungary":[47.22527332486294,19.39620048366142],
"Italy":[41.99599184660806,12.246695926942852],
"Montenegro":[42.73694835210454,19.29505087156758],
"Poland":[52.06848055692473,19.43573279234468],
"San-Marino":[43.942820729097896,12.461278349581722],
"Serbia":[44.02679870131969,20.85677444395745],
"Slovakia":[48.69808390520484,19.58101536249097],
"Slovenia":[46.13759229564504,14.89063689997378],
"North-Macedonia":[41.59402890143112,21.70998923872772],
"Vatican-City":[41.90402351316735,12.451312917026131],
"Norway":[65.18711088537542,16.463696137046043],
"Sweden":[62.46541151205906,17.277289833215],
"Belarus":[53.46791374543163,27.964252054715104],
"Bulgaria":[42.82043677302438,25.251739122561908],
"Estonia":[58.57756953800766,25.23640542437383],
"Finland":[64.81356381018371,25.196596380195327],
"Georgia":[42.17986277737226,43.37886653411224],
"Latvia":[56.81385304755416,24.693671325654403],
"Lithuania":[55.28904028365277,23.889370978174423],
"Moldova":[47.0725674580696,28.391111865941348],
"Romania":[45.82454894397586,25.09415820156329],
"Ukraine":[48.657532515563794,31.27377208442636],
"Afghanistan":[34.13402601376932,66.59216131095278],
"Bahrain":[25.964434666686603,50.62094026880333],
"India":[20.688393643630015,82.83375236985977],
"Iran":[32.906023742890056,54.23707700106544],
"Kuwait":[29.306571941224693,47.631413840209895],
"Maldives":[3.2391153839409266,73.23878260570868],
"Nepal":[28.300920699755657,84.1338898313567],
"Oman":[21.080814680695312,55.89703043777166],
"Pakistan":[30.11618837141088,69.08835090769651],
"Qatar":[25.318528486425382,51.19794918743203],
"Saudi-Arabia":[24.075476084830918,44.54714296861613],
"Somalia":[6.524534573103924,45.40037867243972],
"Sri-Lanka":[7.719586213734208,80.65376391290388],
"Tajikistan":[38.56933138382972,70.94215281065698],
"Turkmenistan":[39.06069118001429,58.4577357627054],
"United-Arab-Emirates":[24.18250292309135,54.27920525789581],
"Yemen":[15.250598269139491,48.4712149337138],
"Armenia":[40.17841274230679,45.05490831965259],
"Azerbaijan":[40.33497634263672,48.39830514333845],
"Kazakhstan":[47.64146519517684,66.3759193479301],
"Kyrgyzstan":[41.35698905438358,74.17532903468319],
"Uzbekistan":[41.4879065244633,63.8548297593985],
"Christmas-Island":[-10.446440802183416,105.70209512200547],
"Cocos-Islands":[-12.171249450199545,96.83688767323002],
"Indonesia":[-2.3079333544632434,118.73586057233209],
"Timor-Leste":[-8.798839646941667,125.668173977829],
"Australia":[-30.13416027985837,137.11656434074948],
"Nauru":[-0.5221021440668993,166.92937633139178],
"New-Caledonia":[-21.253890348985426,166.27594499606235],
"Norfolk-Island":[-29.03765444504628,167.95259597483337],
"Papua-New-Guinea":[-6.430015996626476,148.1803959140757],
"Solomon-Islands":[-9.760237065778515,160.96663461713925],
"Tuvalu":[-7.077587264899652,177.7908632460372],
"Vanuatu":[-16.479658326860534,168.03401497043464],
"Cambodia":[12.699186865507777,105.039730786807],
"Laos":[18.11728273687328,103.76375899026448],
"Malaysia":[4.304358978251201,109.38825444685766],
"Myanmar":[19.7773765841526,97.08691544807498],
"Singapore":[1.3528251890006349,103.81025757634052],
"Thailand":[13.596475025422246,101.06860621475552],
"Vietnam":[16.374291050391896,105.79110320454193],
"Bangladesh":[23.673728665121,90.43212562608612],
"Bhutan":[27.42163933959824,90.4671664717386],
"China":[37.458640079762894,105.45120548784293],
"Brunei-Darussalam":[4.524564529891025,114.79362404227638],
"Philippines":[10.803250497287834,121.86964934640936],
"South-Korea":[36.05236463716811,127.63138763851518],
"Mongolia":[47.08644454604851,103.3987360327455],
"North-Korea":[40.19198091470839,127.3379805653744],
"Guam":[13.445430479945276,144.78024458298802],
"Japan":[35.83580347196827,135.44649610719037],
"Marshall-Islands":[10.051054424749758,167.47185427320863],
"Micronesia":[6.1606517443131565,160.41981307706675],
"Northern-Mariana-Islands":[15.090138493332644,145.68468719023744],
"Palau":[7.507585985168558,134.5666403460281],
"Russian-Federation":[61.45264293577316,98.96988771839898],
"Spain":[40.03038547506125,-2.942967336093022],
"Canarias":[28.41924762477911,-15.920136671626391]}
var fragmentShader = `
void main(void) {
	highp vec4 texelColour = texture2D(uTexture0, vec2(vTextureCoords.s, vTextureCoords.t));

	// Height is represented in TENTHS of a meter
	highp float height = (
		texelColour.r * 255.0 * 256.0 * 256.0 +
		texelColour.g * 255.0 * 256.0 +
		texelColour.b * 255.0 )
	-100000.0;

	if( height>elevation-10.0  && height<elevation-5.0 && height>0.0){
        gl_FragColor = vec4(0.9,0.5,0.5,1); 
    }

	if (height<elevation && height> 0.0) {
        
        if(height<elevation-red  && height> 0.0){
            gl_FragColor = vec4(0.42,0.79,0.91,0.5);
        }
        
        	
	} 	
}
`

var fragmentShader2 = `
void main(void) {
	highp vec4 texelColour = texture2D(uTexture0, vec2(vTextureCoords.s, vTextureCoords.t));

	// Height is represented in TENTHS of a meter
	highp float height = (
		texelColour.r * 255.0 * 256.0 * 256.0 +
		texelColour.g * 255.0 * 256.0 +
		texelColour.b * 255.0 )
	-100000.0;
    
    

    if(height<elevation && height>0.0){
        gl_FragColor = vec4(0.9,0.5,0.5,1); 
    } 

		
}
`
// gl_FragColor = vec4(0.42,0.79,0.91,1);

		var tileSize = 256;
		
		var map = L.map('map').setView([37.0902,- 95.7129], 5);

		var mapboxAccessToken = 'pk.eyJ1Ijoic2FuZGVlcHNhbndhcml5YSIsImEiOiJja3A4ZmhvdGIwMTIyMm5zM2RxNWIya3h5In0.yuJS_cus0cl5UdGeQ-E5kg';

		var base = L.tileLayer("https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/{z}/{x}/{y}?access_token=" + 'pk.eyJ1Ijoic2FuZGVlcHNhbndhcml5YSIsImEiOiJja3A4ZmhvdGIwMTIyMm5zM2RxNWIya3h5In0.yuJS_cus0cl5UdGeQ-E5kg', {
			attribution: 'Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy;<a href="https://www.mapbox.com/map-feedback/">Mapbox</a>',
			id: 'mapbox.streets'
		}).addTo(map);
        
		var antitoner = L.tileLayer.gl({
			uniforms: {
				elevation: Number(document.getElementById('range').value),
                red:Number(red*5),
                
				
			},
			fragmentShader: fragmentShader,
			tileUrls: ['https://{s}.tiles.mapbox.com/v4/mapbox.terrain-rgb/{z}/{x}/{y}.pngraw?access_token=' + 'pk.eyJ1Ijoic2FuZGVlcHNhbndhcml5YSIsImEiOiJja3A4ZmhvdGIwMTIyMm5zM2RxNWIya3h5In0.yuJS_cus0cl5UdGeQ-E5kg']
		})
        antitoner.addTo(map);
		var antitoner2 = L.tileLayer.gl({
			uniforms: {
				elevation: Number(document.getElementById('range').value),              
				
			},
			fragmentShader: fragmentShader2,
			tileUrls: ['https://{s}.tiles.mapbox.com/v4/mapbox.terrain-rgb/{z}/{x}/{y}.pngraw?access_token=' + 'pk.eyJ1Ijoic2FuZGVlcHNhbndhcml5YSIsImEiOiJja3A4ZmhvdGIwMTIyMm5zM2RxNWIya3h5In0.yuJS_cus0cl5UdGeQ-E5kg']
		})
		
        newPageTitle=" Sea Level Rise Map Animation"
        document.title=newPageTitle
        // var con = document.getElementById("con_name");
        var loc_change = document.getElementById("country");
        loc_change.onchange=function (){
            var con = document.getElementById("con_name");
            map.flyTo(data[this.value],6)
            console.log("change",con.innerHTML)
            console.log(this.value)
            country=this.value
            country = country.replace( /-/g, " " )
        console.log( "jsw",country)
        con.innerHTML=country
        
        
        }
        
        var red=10.0
        var start = document.getElementById("start");
        var pause = document.getElementById("pause");
        pause.disabled=true;
		var slider = document.getElementById("range");
        slider.value=0;
		var output = document.getElementById("demo");
        antitoner.setUniform('elevation', 0);
		output.innerHTML = 2021
		function ant(){
            var cl = Number(document.getElementById('range').value);
            
            if(cl<143.7){
                cl = cl + (0.3);
            }
            else {
                
                clearInterval(interval_id);
                
            }
            red=10
            document.getElementById('range').value =cl;
            
            output.innerHTML =2021+(cl/0.3)
            // antitoner.redraw()
            antitoner.setUniform('elevation', cl);
            antitoner.reRender();
            console.log(cl)
            
        };
        function reding(){
            if(red>0){
            red=red-5
            antitoner.redraw()
            antitoner.setUniform('red', red);
            antitoner.reRender();
            }
            if(red===0){
                antitoner.redraw()
                antitoner.setUniform('red', 0.0);
                antitoner.reRender();
                console.log("rs",red)
                clearInterval(inter)
                
            }
        }
        slider.onchange = function() {
        slider.value = this.value;
        output.innerHTML = 2021+(this.value/0.3);
        red=10
        inter=setInterval(reding,500)
        antitoner.redraw()
        antitoner.setUniform('elevation', this.value);
        console.log('t',this.value)
        antitoner.reRender();
        pause.disabled=true;
            start.disabled=false;
        clearInterval(interval_id);
        }
        
        start.onclick=function() {
            interval_id = setInterval(ant,200);
            inter=setInterval(reding,500)
            this.disabled=true;
            pause.disabled=false;
            
          }
        pause.onclick=function(){
            clearInterval(interval_id)
            clearInterval(inter);
  reding()
            this.disabled=true;
            start.disabled=false;
            }

        
        
            var stw=document.getElementById('switch')
            var stw_main=document.getElementById('switch2')
            console.log(stw.checked)
            var col=0
            stw.onclick=function(){
                console.log('asweddffdfdkk')
        
                if(document.getElementById('switch2').checked===false){
                    
                    document.getElementById('range').value=143.7
                    var output = document.getElementById("demo");
                    output.innerHTML =2500
                    antitoner2.setUniform('elevation',143.7);
                    console.log('false')
                    
                    antitoner.remove()
                    antitoner2.addTo(map)
                    pause.disabled=true;
                    start.disabled=true;
                    start.style.background="#808080"
                    pause.style.background="#808080"
                }
                if(document.getElementById('switch2').checked===true){
                    antitoner2.remove()
                    antitoner.addTo(map)
                    document.getElementById('range').value=0
                    var output = document.getElementById("demo");
                    output.innerHTML =2021
                    antitoner.redraw()
                    antitoner.setUniform('elevation', 0);
                    antitoner.reRender();
                    console.log('true')
                    pause.disabled=true;
                    start.disabled=false;
                    pause.disabled=true;
                    start.style.background="white"
                    pause.style.background="white"
                    
                }
    
            }
            